{
    "cosmos-installer": {
        "form": [
            {
                "name": "FILESHARE_PATH",
                "label": "Path to your file share folder",
                "initialValue": "/path/to/your/fileshare/top/folder",
                "type": "text",
                "description": "The absolute path to the folder you want to share through copyparty"
            }
        ]
    },
    "minVersion": "0.9.0",
    "services": {
        "copyparty": {
            "image": "copyparty/ac:latest",
            "container_name": "copyparty",
            "user": "1000:1000",
            "environment": [
                "LD_PRELOAD=/usr/lib/libmimalloc-secure.so.NOPE",
                "PYTHONUNBUFFERED=1"
            ],
            "ports": [
                "3923:3923"
            ],
            "volumes": [
                {
                    "source": "{ServiceName}-config",
                    "target": "/cfg",
                    "type": "volume"
                },
                {
                    "source": "{Context.FILESHARE_PATH}",
                    "target": "/w",
                    "type": "bind",
                    "bind": {
                        "selinux": "z"
                    }
                }
            ],
            "stop_grace_period": "15s",
            "healthcheck": {
                "test": ["CMD-SHELL", "wget --spider -q 127.0.0.1:3923/?reset=/._"],
                "interval": "1m",
                "timeout": "2s",
                "retries": 5,
                "start_period": "15s"
            },
            "routes": [{
                "name": "copyparty",
                "description": "Expose copyparty to the web",
                "useHost": true,
                "target": "http://copyparty:3923",
                "mode": "SERVAPP"
            }]
        }
    },
    "volumes": {
        "{ServiceName}-config": {
            "name": "{ServiceName}-config",
            "driver": "local"
        }
    }
}